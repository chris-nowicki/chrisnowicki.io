---
import { client } from '../js/client'

interface Technologies {
    name: any
    link?: string
    show: boolean
}

// fetch technologies from sanity
const query = '*[_type == "tech"] {name, link, show}'
const tech: Technologies[] = await client.fetch(query)

let sortedTech = tech.sort((a, b) => {
    if (a.name < b.name) {
        return -1
    }
    if (a.name > b.name) {
        return 1
    }
    return 0
})
---

<div
    class="flex flex-col w-full items-center mt-10 md:mt-20 bg-bgDark rounded p-4 shadow-lg shadow-bgDark/50 dark:bg-gray-900 dark:shadow-lg dark:shadow-gray-900/50"
>
    <h1 class="text-2xl text-purpleDark mb-3 uppercase">Tech I Work With</h1>
    <ul
        id="a10"
        class="flex flex-col items-center max-h-48 flex-wrap w-full link-animate text-textDark text-base"
    >
        {
            sortedTech.map(
                (tech) =>
                    tech.show && (
                        <li class="py-1 text-xl">
                            {tech.link ? (
                                <a
                                    href={tech.link}
                                    target="_blank"
                                    class="text-textDark hover:text-purpleDark"
                                >
                                    {tech.name}
                                </a>
                            ) : (
                                tech.name
                            )}
                        </li>
                    )
            )
        }
    </ul>
</div>
