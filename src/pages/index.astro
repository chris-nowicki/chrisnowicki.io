---
// layout
import Layout from '../layouts/Layout.astro'

// components
import About from '../components/About.astro'
import TechSkills from '../components/TechSkills/TechSkills'
import Contact from '../components/Contact.astro'
import FeaturedProjects from '../components/FeaturedProjects/FeaturedProjects.astro'

// types
import { Settings } from '../ts/types'

// sanity client and query
import { client, siteSettings as query } from '../lib/sanity'

// fetch site settings from sanity.io
const response: Settings = await client.fetch(query)
const siteSettings = response[0]
---

<Layout>
    <main class="flex flex-col items-center px-10 lg:px-0">
        <div class="flex max-w-3xl flex-col">
            <div
                class="mt-0 flex flex-row flex-wrap-reverse justify-center md:mt-10 md:flex-nowrap"
            >
                <About />
            </div>
            <div class="flex w-full flex-col items-center">
                <h1
                    class="mb-3 mt-16 w-full rounded bg-bgDark p-2 text-center text-2xl text-purpleDark dark:bg-gray-900 md:px-0 md:text-4xl"
                >
                    Technical Skills
                </h1>

                <TechSkills client:only />
                {siteSettings.showProjects && <FeaturedProjects />}
            </div>

            <Contact showProjects={siteSettings.showProjects} />
        </div>
    </main>
</Layout>
